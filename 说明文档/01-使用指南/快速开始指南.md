# 快速开始指南

本文档整合了项目快速启动和配置说明。

---

## 第一部分：快速启动

### 🚀 一键启动（最简单）

#### Windows用户

1. 克隆项目后，直接**双击 `start.bat`** 文件
2. 脚本会自动：
   - ✅ 检查Python版本
   - ✅ 检查并自动安装缺失的依赖包
   - ✅ 创建.env配置文件（如果不存在）
   - ✅ 启动Django服务器

#### Linux/Mac用户

1. 克隆项目后，在终端运行：
   ```bash
   chmod +x start.sh
   ./start.sh
   ```
   或直接运行：
   ```bash
   python start.py
   ```

### 📋 首次运行需要做的

启动脚本会自动处理依赖安装，但首次运行还需要：

1. **配置数据库**
   - 编辑 `.env` 文件
   - 修改数据库配置（DB_NAME, DB_USER, DB_PASSWORD等）

2. **创建数据库**
   ```sql
   CREATE DATABASE educloud CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
   ```

3. **运行数据库迁移**
   ```bash
   python manage.py migrate
   ```

4. **创建超级管理员**（可选）
   ```bash
   python manage.py createsuperuser
   ```

### ✨ 智能启动脚本功能

- 🔍 **自动检查Python版本** - 确保版本符合要求（3.8+）
- 📦 **自动检查依赖包** - 读取requirements.txt并检查每个包
- ⬇️ **自动安装缺失包** - 发现缺失的包会自动安装
- 📝 **自动创建.env** - 如果.env不存在，会从.env.example复制
- 🚀 **一键启动服务器** - 配置完成后自动启动Django服务器

### 💡 使用技巧

- 如果某个包安装失败，脚本会继续运行，你可以稍后手动安装
- 脚本会显示详细的安装进度和结果
- 按 `Ctrl+C` 可以随时停止服务器

### 🆘 遇到问题？

1. **Python未找到**
   - 确保已安装Python 3.8或更高版本
   - 确保Python已添加到系统PATH

2. **依赖安装失败**
   - 检查网络连接
   - 尝试手动运行：`pip install -r requirements.txt`
   - 如果使用虚拟环境，确保已激活

3. **数据库连接失败**
   - 确保MySQL服务已启动
   - 检查.env文件中的数据库配置
   - 确保数据库已创建

4. **端口被占用**
   - Django默认使用8000端口
   - 如果被占用，可以修改：`python manage.py runserver 8080`

---

## 第二部分：项目配置

### 已完成的配置

#### 1. 创建了 `.gitignore` 文件
- 排除Python缓存文件（`__pycache__/`, `*.pyc`）
- 排除环境变量文件（`.env`），但保留 `.env.example`
- 排除IDE配置文件
- 排除临时文件和日志文件

#### 2. 创建了 `.env.example` 环境变量模板
- 包含所有必要的环境变量配置
- 提供默认值，方便新用户快速开始
- 不会被Git忽略，可以安全提交到仓库

#### 3. 更新了 `EduCloud/settings.py`
- 使用 `python-dotenv` 加载环境变量
- `SECRET_KEY` 从环境变量读取（避免硬编码）
- `DEBUG` 从环境变量读取
- `ALLOWED_HOSTS` 从环境变量读取
- 数据库配置已支持环境变量（之前已有）
- 学期配置支持环境变量

#### 4. 更新了 `requirements.txt`
- 添加了 `python-dotenv==1.0.0` 用于读取环境变量

#### 5. 创建了智能启动脚本
- `start.py` - 跨平台启动脚本（自动检查并安装依赖）
- `start.bat` - Windows启动脚本
- `start.sh` - Linux/Mac启动脚本

#### 6. 创建了初始化脚本
- `一键检查/setup.py` - 自动创建.env文件、安装依赖、运行迁移、收集静态文件

#### 7. 创建了配置检查脚本
- `一键检查/check_setup.py` - 检查关键文件、验证环境变量、检查依赖、测试数据库连接

### 使用说明

#### 方式一：使用初始化脚本（完整设置）

1. **克隆项目**
   ```bash
   git clone <repository-url>
   cd EduCloud
   ```

2. **创建虚拟环境**（推荐）
   ```bash
   python -m venv venv
   # Windows:
   venv\Scripts\activate
   # Linux/Mac:
   source venv/bin/activate
   ```

3. **运行初始化脚本**
   ```bash
   python 一键检查/setup.py
   ```
   脚本会自动完成所有配置步骤。

4. **启动服务器**
   ```bash
   # 使用智能启动脚本（推荐）
   start.bat  # Windows
   ./start.sh  # Linux/Mac
   
   # 或直接启动
   python manage.py runserver
   ```

### 验证配置

运行配置检查脚本：
```bash
python 一键检查/check_setup.py
```

## 重要注意事项

1. **`.env` 文件不要提交到Git**
   - `.env` 文件包含敏感信息（数据库密码、密钥等）
   - 已在 `.gitignore` 中排除
   - 只提交 `.env.example` 作为模板

2. **数据库配置**
   - 确保MySQL服务已启动
   - 确保数据库已创建（名称与 `.env` 中的 `DB_NAME` 一致）
   - 确保数据库用户有足够权限

3. **Python版本**
   - 需要Python 3.8或更高版本
   - 推荐使用虚拟环境隔离依赖

4. **首次运行**
   - 必须运行数据库迁移：`python manage.py migrate`
   - 建议创建超级管理员账户

## 文件清单

以下文件是新创建的或已修改的：

**新创建的文件：**
- `.gitignore` - Git忽略规则
- `.env.example` - 环境变量模板
- `README.md` - 项目说明文档
- `一键检查/setup.py` - 初始化脚本
- `一键检查/check_setup.py` - 配置检查脚本
- `start.py` - 智能启动脚本（Python，跨平台）
- `start.bat` - Windows启动脚本
- `start.sh` - Linux/Mac启动脚本

**修改的文件：**
- `EduCloud/settings.py` - 添加环境变量支持
- `requirements.txt` - 添加python-dotenv依赖

---

**版本**：1.0.0  
**更新日期**：2024年

