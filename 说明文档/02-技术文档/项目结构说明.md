# 项目结构说明

本文档说明 EduCloud 教务云管理系统的项目结构和各目录/文件的作用。

## 📁 项目目录结构

```
EduCloud/
├── EduCloud/                    # Django项目主配置目录
│   ├── __init__.py              # Python包初始化文件
│   ├── settings.py              # Django项目设置（数据库、应用配置等）
│   ├── urls.py                  # 项目主URL路由配置
│   ├── wsgi.py                  # WSGI部署配置
│   ├── asgi.py                  # ASGI部署配置
│   └── views.py                 # 项目主视图
│
├── accounts/                    # 账户管理应用
│   ├── __init__.py              # Python包初始化文件
│   ├── models.py                # 用户账户模型（用户档案、学生档案等）
│   ├── views.py                 # 账户相关视图
│   ├── serializers.py           # API序列化器
│   ├── urls.py                  # 账户路由配置
│   ├── admin.py                 # Django管理后台配置
│   ├── apps.py                  # 应用配置文件
│   ├── permissions.py           # 权限管理文件
│   ├── forms.py                 # 表单定义文件
│   ├── importers.py             # 数据导入器文件
│   └── management/commands/     # 管理命令目录
│       ├── create_admin_secure.py      # 创建安全管理员命令
│       ├── verify_db_migration.py      # 验证数据库迁移命令
│       └── verify_files.py             # 验证文件命令
│
├── organization/                # 组织架构管理应用
│   ├── __init__.py              # Python包初始化文件
│   ├── models.py                # 组织模型（学院、专业、班级等）
│   ├── views.py                 # 组织相关视图
│   ├── serializers.py           # API序列化器
│   ├── urls.py                  # 组织路由配置
│   ├── apps.py                  # 应用配置文件
│   ├── services.py              # 业务逻辑服务文件
│   ├── permissions.py           # 权限管理文件
│   └── tests/                   # 单元测试目录
│       ├── __init__.py          # 测试包初始化文件
│       └── test_validators.py   # 验证器测试文件
│
├── courses/                     # 课程管理应用
│   ├── __init__.py              # Python包初始化文件
│   ├── models.py                # 课程模型（课程、课程表、时间段等）
│   ├── views.py                 # 课程相关视图
│   ├── serializers.py           # API序列化器
│   ├── urls.py                  # 课程路由配置
│   ├── admin.py                 # Django管理后台配置
│   ├── apps.py                  # 应用配置文件
│   ├── forms.py                 # 表单定义文件
│   └── signals.py               # Django信号处理文件
│
├── attendance_app/              # 考勤管理应用
│   ├── __init__.py              # Python包初始化文件
│   ├── models.py                # 考勤模型
│   ├── views.py                 # 考勤相关视图
│   ├── serializers.py           # API序列化器
│   ├── admin.py                 # Django管理后台配置
│   ├── apps.py                  # 应用配置文件
│   └── urls.py                  # 考勤路由配置
│
├── grades/                      # 成绩管理应用
│   ├── __init__.py              # Python包初始化文件
│   ├── models.py                # 成绩模型
│   ├── views.py                 # 成绩相关视图
│   ├── serializers.py           # API序列化器
│   ├── admin.py                 # Django管理后台配置
│   ├── apps.py                  # 应用配置文件
│   └── urls.py                  # 成绩路由配置
│
├── notices/                     # 通知管理应用
│   ├── __init__.py              # Python包初始化文件
│   ├── models.py                # 通知模型
│   ├── views.py                 # 通知相关视图
│   ├── serializers.py           # API序列化器
│   ├── admin.py                 # Django管理后台配置
│   ├── apps.py                  # 应用配置文件
│   └── urls.py                  # 通知路由配置
│
├── calendarapp/                 # 日历应用
│   ├── __init__.py              # Python包初始化文件
│   ├── models.py                # 日历模型
│   ├── views.py                 # 日历相关视图
│   ├── serializers.py           # API序列化器
│   ├── admin.py                 # Django管理后台配置
│   ├── apps.py                  # 应用配置文件
│   └── urls.py                  # 日历路由配置
│
├── classrooms/                  # 教室管理应用
│   ├── __init__.py              # Python包初始化文件
│   ├── models.py                # 教室模型
│   ├── views.py                 # 教室相关视图
│   ├── apps.py                  # 应用配置文件
│   ├── forms.py                 # 表单定义文件
│   └── urls.py                  # 教室路由配置
│
├── personnel/                   # 人员管理应用
│   ├── __init__.py              # Python包初始化文件
│   ├── models.py                # 人员模型（教师等）
│   ├── views.py                 # 人员相关视图
│   ├── serializers.py           # API序列化器
│   ├── admin.py                 # Django管理后台配置
│   ├── apps.py                  # 应用配置文件
│   ├── services.py              # 业务逻辑服务文件
│   ├── permissions.py           # 权限管理文件
│   └── management/commands/     # 管理命令目录
│       ├── __init__.py          # 命令包初始化文件
│       └── ensure_teacher_accounts.py  # 确保教师账户命令
│
├── students/                    # 学生管理应用
│   ├── __init__.py              # Python包初始化文件
│   ├── models.py                # 学生模型
│   ├── views.py                 # 学生相关视图
│   ├── apps.py                  # 应用配置文件
│   ├── forms.py                 # 表单定义文件
│   └── urls.py                  # 学生路由配置
│
├── teachers/                    # 教师管理应用
│   ├── __init__.py              # Python包初始化文件
│   ├── models.py                # 教师模型
│   ├── views.py                 # 教师相关视图
│   ├── apps.py                  # 应用配置文件
│   ├── forms.py                 # 表单定义文件
│   └── urls.py                  # 教师路由配置
│
├── exams/                       # 考试管理应用
│   ├── __init__.py              # Python包初始化文件
│   ├── models.py                # 考试模型
│   ├── views.py                 # 考试相关视图
│   ├── apps.py                  # 应用配置文件
│   ├── forms.py                 # 表单定义文件
│   └── urls.py                  # 考试路由配置
│
├── system/                      # 系统管理应用
│   ├── __init__.py              # Python包初始化文件
│   ├── views.py                 # 系统相关视图
│   ├── apps.py                  # 应用配置文件
│   └── urls.py                  # 系统路由配置
│
├── core/                        # 核心功能应用
│   ├── __init__.py              # Python包初始化文件
│   ├── views.py                 # 核心视图
│   ├── urls.py                  # 核心路由配置
│   ├── apps.py                  # 应用配置文件
│   └── management/commands/     # 管理命令目录
│       ├── __init__.py          # 命令包初始化文件
│       ├── clear_db.py          # 清空数据库命令
│       └── create_admin.py      # 创建管理员命令
│
├── templates/                   # HTML模板目录
│   ├── base.html                # 基础模板
│   ├── login.html               # 登录页面
│   ├── index.html               # 首页
│   ├── accounts/                # 账户相关模板目录
│   ├── courses/                 # 课程相关模板目录
│   ├── students/                # 学生相关模板目录
│   ├── teachers/                # 教师相关模板目录
│   ├── classrooms/              # 教室相关模板目录
│   ├── exams/                   # 考试相关模板目录
│   └── system/                  # 系统相关模板目录
│
├── static/                      # 静态文件目录
│   ├── css/                     # CSS样式文件目录
│   │   ├── base.css             # 基础样式文件
│   │   ├── style.css            # 主样式文件
│   │   ├── dashboard/           # 仪表板样式目录
│   │   └── management/          # 管理页面样式目录
│   ├── js/                      # JavaScript文件目录
│   │   ├── app.js               # 主应用JS文件
│   │   ├── dashboard.js         # 仪表板JS文件
│   │   ├── accounts/            # 账户相关JS目录
│   │   ├── courses/             # 课程相关JS目录
│   │   ├── students/            # 学生相关JS目录
│   │   └── teachers/            # 教师相关JS目录
│   └── vendor/                  # 第三方库文件目录
│
├── 一键检查/                    # 项目检查和初始化工具目录
│   ├── __init__.py              # Python包初始化文件
│   ├── .gitkeep                 # Git跟踪文件（确保空目录被跟踪）
│   ├── 一键检查.py              # 主入口脚本（菜单式）
│   ├── 一键检查.bat             # Windows启动脚本
│   ├── 一键检查.sh              # Linux/Mac启动脚本
│   ├── check_setup.py           # 项目配置检查脚本
│   ├── setup.py                 # 项目初始化脚本
│   ├── check_before_import.py   # 导入前检查脚本
│   ├── check_friday_slots.py   # 周五时间段检查脚本
│   └── README.md                # 使用说明文档
│
├── 归档文件/                    # 归档文件目录
│   ├── 01-临时报告/            # 临时报告文件目录
│   ├── 02-部署配置/            # 部署配置文件目录
│   ├── 03-清理记录/            # 清理记录文档目录
│   ├── 04-一次性脚本/          # 一次性脚本目录
│   └── README.md                # 归档文件说明文档
│
├── 说明文档/                    # 项目文档目录
│   ├── 01-使用指南/             # 使用指南文档目录
│   ├── 02-技术文档/             # 技术设计文档目录
│   ├── 03-修复记录/             # 问题修复记录目录
│   ├── 05-课程管理/             # 课程管理相关文档目录
│   └── 06-其他/                 # 其他文档目录
│
├── manage.py                    # Django管理脚本
├── requirements.txt             # Python依赖列表文件
│
├── start.py                     # 智能启动脚本文件（自动检查依赖）
├── start.bat                    # Windows启动脚本文件
├── start.sh                     # Linux/Mac启动脚本文件
│
├── .env.example                 # 环境变量模板文件
├── .gitignore                   # Git忽略规则文件
├── .vercelignore                # Vercel部署忽略规则文件
│
├── vercel.json                  # Vercel部署配置文件
├── migration_file_report.json   # 数据库迁移文件报告（JSON格式）
│
├── README.md                    # 项目主说明文档
├── QUICK_START.md               # 快速启动指南文档
├── SETUP_GUIDE.md               # 设置指南文档
├── CLEANUP_SUMMARY.md           # 清理总结文档
├── PROJECT_STRUCTURE.md         # 项目结构文档（本文件）
└── 数据库导出说明.md            # 数据库导出工具说明文档
```

## 📋 主要目录说明

### 1. Django应用目录

每个Django应用通常包含以下文件：

- **`__init__.py`** - Python包初始化文件（标识目录为Python包）
- **`models.py`** - 数据模型定义文件（数据库表结构）
- **`views.py`** - 视图函数文件（处理HTTP请求）
- **`serializers.py`** - API序列化器文件（用于REST API）
- **`urls.py`** - URL路由配置文件
- **`admin.py`** - Django管理后台配置文件
- **`apps.py`** - 应用配置文件（应用元数据）
- **`forms.py`** - 表单定义文件（如果使用）
- **`migrations/`** - 数据库迁移文件目录
- **`management/commands/`** - 自定义管理命令目录（可选）

### 2. 核心目录

- **`EduCloud/`** - Django项目主配置目录，包含settings.py、urls.py等核心配置文件
- **`templates/`** - HTML模板文件目录
- **`static/`** - 静态资源文件目录（CSS、JavaScript、图片等）

### 3. 工具目录

- **`工具/`** - 项目工具脚本目录（按功能分类）
  - `01-数据库工具/` - 数据库相关工具
  - `02-时间段工具/` - 时间段生成工具
- **`一键检查/`** - 项目检查和初始化工具集合目录
- **`说明文档/`** - 项目文档和说明目录
- **`归档文件/`** - 归档文件目录（不需要的文件）

### 4. 根目录文件

**核心文件：**
- **`manage.py`** - Django命令行工具入口文件
- **`requirements.txt`** - Python依赖包列表文件

**启动脚本：**
- **`start.py`** - 智能启动脚本文件（自动检查并安装依赖）
- **`start.bat`** - Windows启动脚本文件
- **`start.sh`** - Linux/Mac启动脚本文件

**工具脚本：**
所有工具脚本已整理到 `工具/` 目录，按功能分类：
- **`工具/01-数据库工具/`** - 数据库相关工具目录
  - `export_database_to_mysql.py` - 数据库导出工具脚本文件
  - `export_database.bat` - 数据库导出批处理文件
- **`工具/02-时间段工具/`** - 时间段生成工具目录
  - `generate_timeslots.py` - 生成时间段工具脚本文件
  - `generate_timeslots.bat` - 生成时间段批处理文件

**配置文件：**
- **`.env.example`** - 环境变量配置模板文件
- **`.gitignore`** - Git忽略规则文件
- **`.vercelignore`** - Vercel部署忽略规则文件
- **`vercel.json`** - Vercel部署配置文件

**报告文件：**
- **`migration_file_report.json`** - 数据库迁移文件报告（JSON格式）

**文档文件：**
- **`README.md`** - 项目主说明文档
- **`QUICK_START.md`** - 快速启动指南文档
- **`SETUP_GUIDE.md`** - 设置指南文档
- **`CLEANUP_SUMMARY.md`** - 清理总结文档
- **`PROJECT_STRUCTURE.md`** - 项目结构文档（本文件）
- **`数据库导出说明.md`** - 数据库导出工具说明文档

## 🔧 主要应用功能

| 应用名称 | 主要功能说明 |
|---------|-------------|
| `accounts` | 用户账户管理、角色权限管理 |
| `organization` | 组织架构管理（学院、专业、班级） |
| `courses` | 课程管理、课程表管理、时间段管理 |
| `attendance_app` | 学生考勤管理 |
| `grades` | 成绩管理 |
| `notices` | 通知公告管理 |
| `calendarapp` | 日历功能管理 |
| `classrooms` | 教室管理 |
| `personnel` | 人员管理（教师等） |
| `students` | 学生信息管理 |
| `teachers` | 教师信息管理 |
| `exams` | 考试管理 |
| `system` | 系统管理 |

## 📝 重要文件说明

### 配置文件

- **`EduCloud/settings.py`** - Django项目主配置文件
  - 数据库配置
  - 应用注册
  - 中间件配置
  - 静态文件配置
  - REST Framework配置

- **`.env.example`** - 环境变量模板文件
  - 数据库连接信息
  - Django密钥
  - 调试模式设置

- **`vercel.json`** - Vercel部署配置文件
  - URL重写规则
  - 部署配置

- **`.vercelignore`** - Vercel部署忽略规则文件
  - 指定部署时忽略的文件和目录

### 启动脚本

- **`start.py`** - 智能启动脚本文件
  - 自动检查Python版本
  - 自动检查并安装依赖
  - 自动创建.env文件
  - 启动Django服务器

- **`start.bat`** / **`start.sh`** - 跨平台启动脚本文件

### 工具脚本

所有工具脚本已整理到 `工具/` 目录，按功能分类：

**数据库工具** (`工具/01-数据库工具/`)：
- **`export_database_to_mysql.py`** - 导出数据库为SQL文件的工具脚本文件
  - 功能：将Django数据库导出为MySQL INSERT语句
  - 使用方法：`python 工具/01-数据库工具/export_database_to_mysql.py`
  - Windows快速运行：双击 `工具/01-数据库工具/export_database.bat`
- **`export_database.bat`** - 数据库导出工具的批处理文件（Windows快速运行）
- **`数据库导出说明.md`** - 数据库导出工具详细说明文档

**时间段工具** (`工具/02-时间段工具/`)：
- **`generate_timeslots.py`** - 生成标准时间段数据的工具脚本文件
  - 功能：生成标准的上课时间段数据（周一到周日，每天8节课）
  - 使用方法：`python 工具/02-时间段工具/generate_timeslots.py`
  - Windows快速运行：双击 `工具/02-时间段工具/generate_timeslots.bat`
- **`generate_timeslots.bat`** - 生成时间段工具的批处理文件（Windows快速运行）

**工具目录说明**：
- 每个工具分类目录都包含README.md说明文档
- 所有工具脚本已更新路径引用，可以从工具目录直接运行
- 批处理文件会自动切换到项目根目录执行

### 报告文件

- **`migration_file_report.json`** - 数据库迁移文件报告
  - 记录迁移文件的生成信息
  - 用于验证迁移文件的完整性

## 🗂️ 数据库迁移

每个应用的 `migrations/` 目录包含数据库迁移文件，用于：
- 创建数据库表结构
- 修改表结构
- 数据迁移

运行迁移：
```bash
python manage.py migrate
```

## 📚 文档结构

- **`README.md`** - 项目主说明文档
- **`QUICK_START.md`** - 快速启动指南文档
- **`SETUP_GUIDE.md`** - 详细设置指南文档
- **`说明文档/`** - 分类整理的详细文档目录

## 🔍 查找文件技巧

- **模型定义** → 各应用的 `models.py` 文件
- **API接口** → 各应用的 `views.py` 和 `serializers.py` 文件
- **URL路由** → 各应用的 `urls.py` 文件和 `EduCloud/urls.py` 文件
- **前端模板** → `templates/` 目录
- **静态资源** → `static/` 目录
- **管理命令** → 各应用的 `management/commands/` 目录
- **数据导入** → `accounts/importers.py` 文件（数据导入器）
- **业务逻辑** → 各应用的 `services.py` 文件
- **权限管理** → 各应用的 `permissions.py` 文件
- **表单定义** → 各应用的 `forms.py` 文件
- **信号处理** → 各应用的 `signals.py` 文件（如courses应用）

## 💡 开发建议

1. **新增功能**：在对应的应用目录下添加代码文件
2. **数据库变更**：使用Django迁移系统（`migrations/` 目录）
3. **API开发**：使用Django REST Framework（`serializers.py` 和 `views.py`）
4. **前端开发**：在 `templates/` 和 `static/` 目录下工作
5. **测试**：建议在 `organization/tests/` 目录下参考测试示例
6. **数据导入**：使用 `accounts/importers.py` 中的导入器类
7. **业务逻辑**：复杂业务逻辑放在 `services.py` 文件中
8. **权限控制**：在 `permissions.py` 文件中定义权限类
9. **表单处理**：在 `forms.py` 文件中定义表单类
10. **信号处理**：在 `signals.py` 文件中处理Django信号

## 📌 注意事项

- 所有Python文件使用UTF-8编码
- 数据库使用MySQL，字符集为utf8mb4
- 静态文件收集后存放在 `staticfiles/` 目录（生产环境）
- 环境变量文件 `.env` 不应提交到Git（已在.gitignore文件中排除）
- 所有应用目录都包含 `__init__.py` 文件（标识为Python包）
- `migration_file_report.json` 是自动生成的报告文件，用于验证迁移文件
- `vercel.json` 和 `.vercelignore` 用于Vercel平台部署配置
- 管理命令文件位于各应用的 `management/commands/` 目录下
- 测试文件位于 `organization/tests/` 目录下（其他应用可参考此结构）

---

*最后更新：2024年*
