# 双击编辑课程功能说明

## 功能概述

在**课程列表**中，双击任意课程可以快速编辑该课程的基本信息，包括：
- 课程名称
- 授课教师
- 教室地址（默认教室）

> 💡 **注意**：这是编辑课程的基本信息，不是编辑课表中的某一节课安排。

## 使用方法

### 1. 打开编辑窗口

- 在**左侧课程列表**中找到要编辑的课程
- **双击**该课程项
- 系统会弹出编辑窗口，自动加载当前课程信息

### 2. 编辑课程信息

编辑窗口包含以下字段：

#### 课程名称（必填）
- 修改课程的显示名称
- 必填项，不能为空
- 修改后会影响所有使用该课程的课表

#### 授课教师
- 可以通过搜索框快速查找教师
- 支持按教师姓名或工号搜索
- 从下拉列表中选择新的教师
- 修改后会更新课程的默认教师

#### 教室地址
- 可以输入任意格式的教室地址
- 格式示例：`A栋101`、`实验楼201`、`图书馆3楼`、`线上课程`
- 可以留空表示待定
- 作为该课程的默认教室地址

### 3. 保存修改

- 点击"保存"按钮完成编辑
- 系统会自动验证必填项
- 保存成功后会提示并自动刷新课程列表

## 功能特点

### 🎯 快速编辑
- 双击课程列表项即可编辑，无需进入复杂的菜单
- 适合快速修改课程基本信息
- 一次修改，全局生效

### 🔍 教师搜索
- 支持实时搜索教师
- 输入关键词快速筛选
- 显示教师姓名和工号便于识别
- 修改后更新课程的默认教师

### 📚 批量影响
- 修改课程名称后，所有课表中的该课程都会更新
- 修改教师后，新的课表排课会使用新教师
- 统一管理课程信息

### 💾 智能保存
- 自动验证数据完整性
- 成功后立即更新课程列表显示
- 实时同步到所有相关页面

## 技术实现

### 后端支持

1. **API 支持**：
   - 获取课程详情：`GET /api/courses/courses/{id}/`
   - 更新课程信息：`PATCH /api/courses/courses/{id}/`
   - 获取教师列表：`GET /api/accounts/teachers/`
   - 搜索教师：`GET /api/accounts/teachers/?search={keyword}`

2. **数据验证**：
   - 课程名称必填验证
   - 教师ID有效性验证
   - 确保数据完整性

### 前端交互

1. **双击事件绑定**：
```javascript
// 在renderCourseList函数中为每个课程项添加双击事件
item.addEventListener('dblclick', (e) => {
    const courseId = item.dataset.courseId;
    openEditCourseFromList(courseId);
});
```

2. **编辑流程**：
   - 双击课程列表项触发 `openEditCourseFromList(courseId)`
   - 加载课程详情和教师列表
   - 填充表单数据（课程名称、当前教师）
   - 隐藏教室地址字段（课程编辑不需要）
   - 提供教师搜索和选择功能
   - 保存时调用 `PATCH /api/courses/courses/{id}/` 更新课程

3. **UI 适配**：
   - 编辑课程时隐藏教室地址字段
   - 模态框标题显示"编辑课程信息"
   - 关闭窗口时恢复所有字段显示

## 注意事项

1. **课程名称必填**：保存时必须填写课程名称
2. **教师可选**：如果不修改教师，可以保持原有选择
3. **全局影响**：修改课程信息会影响所有使用该课程的课表
4. **编辑对象**：这是编辑课程基本信息，不是编辑某一节课的安排
5. **权限控制**：只有有权限的用户才能编辑课程

## 应用场景

1. **课程名称规范化**：统一课程名称的显示格式
2. **教师变更**：某课程更换常规授课教师
3. **课程信息维护**：批量修正课程的基本信息
4. **新学期准备**：调整下学期课程的教师安排

## 与课表编辑的区别

| 功能 | 双击课程列表 | 课表中的课程 |
|------|------------|-------------|
| 编辑对象 | 课程基本信息 | 具体某节课的安排 |
| 影响范围 | 全局（所有课表） | 单节课 |
| 可编辑内容 | 课程名称、默认教师 | 课程名称、教师、教室、时间 |
| 使用场景 | 课程信息维护 | 临时调课、换教室 |

## 未来扩展

- 支持批量编辑多个课程
- 添加课程编辑历史记录
- 提供课程使用情况统计
- 支持课程归档和恢复

